-- MySQL Script generated by MySQL Workbench
-- Fri Apr 15 06:57:55 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

-- -----------------------------------------------------
-- Schema Nutrition_Tracker
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Nutrition_Tracker
-- -----------------------------------------------------
DROP SCHEMA if exists `Nutrition_Tracker`;
CREATE SCHEMA IF NOT EXISTS `Nutrition_Tracker` DEFAULT CHARACTER SET utf8 ;
USE `Nutrition_Tracker` ;

-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Food_Group`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Food_Group` (
  `food_group_id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`food_group_id`));

INSERT INTO Food_Group values
(1, "Diary"),
(2, "Vegetables"),
(3, "Protein"),
(4, "Fruits"),
(5, "Grains"),
(6, "Unknown");




-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Ingredient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Ingredient` (
  `ingredient_id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `calories_per_serving` INT NOT NULL,
  `serving_size` INT NOT NULL,
  `unit` VARCHAR(45) NOT NULL,
  `food_group_id` INT NOT NULL,
  PRIMARY KEY (`ingredient_id`),
  UNIQUE INDEX `ingredient_id_UNIQUE` (`ingredient_id` ASC) VISIBLE,
  INDEX `food_group_id_idx` (`food_group_id` ASC) VISIBLE,
  CONSTRAINT `food_group_id`
    FOREIGN KEY (`food_group_id`)
    REFERENCES `Nutrition_Tracker`.`Food_Group` (`food_group_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    
INSERT INTO Ingredient values
(1, "Egg", 44, 1, "oz", 1),
(2, "Scallion", 9, 1, "oz", 2),
(3, "Cilantro", 7, 1, "oz", 2),
(4, "Rice", 37, 1, "oz", 5),
(5, "Crispy Chicken", 70, 1, "oz", 3),
(6, "Pork", 130, 1, "oz", 3),
(7, "Bean Sprouts", 15, 1, "oz", 2),
(8, "Peanuts", 98, 1, "oz", 3),
(9, "Noodle", 36, 1, "oz", 5),
(10, "Cabbage", 6, 1, "oz", 2),
(11, "Carrots", 10, 1, "oz", 2),
(12, "Olive Oil", 250, 1, "oz", 2),
(13, "Broccoli", 10, 1, "oz", 2),
(14, "Shrimp", 25, 1, "oz", 3),
(15, "Soy Sauce", 16, 1, "oz", 5),
(16, "Chicken", 34, 1, "oz", 3),
(17, "Red Pepper", 7, 1, "oz", 2),
(18, "String Bean", 11, 1, "oz", 2),
(19, "Basil", 1, 1, "oz", 2),
(20, "Chilli Sauce", 6, 1, "oz", 2),
(21, "Peanut Satay", 58, 1, "oz", 3),
(22, "American Cheese", 94, 1, "oz", 1),
(23, "Cheddar Cheese", 113, 1, "oz", 1),
(24, "Potato French Fries", 267, 3, "oz", 2),
(25, "Lettuce", 4, 1, "oz", 2),
(26, "Tomato", 5, 1, "oz", 2),
(27, "Grilled Onions", 11, 1, "oz", 2),
(28, "Pickles", 3, 1, "oz", 2),
(29, "Hamburger Bun", 79, 1, "oz", 5),
(30, "Mayonnaise", 193, 1, "oz", 1),
(31, "Pasta", 38, 1, "oz", 5),
(32, "Butter", 204, 1, "oz", 1),
(33, "Heavy Cream", 103, 1, "oz", 1),
(34, "Blackpepper", 72, 1, "oz", 2),
(35, "Parmesan Cheese", 122, 1, "oz", 1),
(36, "Mushroom", 6, 1, "oz", 2),
(37, "Pancetta", 152, 1, "oz", 3),
(38, "Pea", 79, 23, "oz", 2),
(39, "Asparagus", 5, 1, "oz", 2),
(40, "Avocado", 45, 1, "oz", 2),
(41, "Beets", 12, 1, "oz", 2),
(42, "Green Beans", 9, 1, "oz", 2),
(43, "Cucuber", 4, 1, "oz", 2),
(44, "Quinoa", 106, 1, "oz", 5),
(45, "Farro", 110, 1, "oz", 5),
(46, "Almonds", 164, 1, "oz", 3),
(47, "Red Onion", 10, 1, "oz", 2),
(48, "Beef(RibEye)", 83, 23, "oz", 3),
(49, "Cream Cheese", 97, 1, "oz", 1),
(50, "Acai", 38, 1, "oz", 4),
(51, "Granola", 134, 1, "oz", 5),
(52, "Banana", 25, 1, "oz", 4),
(53, "Honey", 86, 1, "oz", 4),
(54, "Blueberry", 16, 1, "oz", 4),
(55, "Strawberry", 9, 1, "oz", 4),
(56, "Pineapple", 14, 1, "oz", 4),
(57, "Coconut Flakes", 100, 1, "oz", 4),
(58, "Pitaya", 21, 1, "oz", 4),
(59, "Raw Cacao", 65, 1, "oz", 4),
(60, "Nutella Drizzle", 150, 1, "oz", 1),
(61, "Kiwi", 17, 1, "oz", 4),
(62, "Mango", 17, 1, "oz", 4),
(63, "Chocolate Protein", 88, 1, "oz", 1),
(64, "Vanilla Protein", 82, 1, "oz", 1),
(65, "Peanut Butter", 167, 1, "oz", 1),
(66, "Coconut Blend", 40, 1, "oz", 4),
(67, "Potato", 22, 1, "oz", 2),
(68, "Sour Cream", 54, 1, "oz", 1),
(69, "Unknown", 1, 1, "oz", 6);








-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Restaurant`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Restaurant` (
  `restaurant_id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `zipcode` INT NOT NULL,
  `street` VARCHAR(45) NOT NULL,
  `state` VARCHAR(45) NOT NULL,
  `city` VARCHAR(45) NOT NULL,
  `country` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`restaurant_id`));
  

INSERT INTO Restaurant values
(1, "Bangkok Pinto", 02118, "1041 Tremont St", "Boston", "MA", "USA"),
(2, "Cheesecake Factory", 02115, "115 Huntington Ave", "Boston", "MA", "USA"),
(3, "Playa Bowls", 02115, "277 Huntington Ave", "Boston", "MA", "USA"),
(4, "No Restaurant", 02115, "No Street", "Boston", "MA", "USA");







-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Menu_item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Menu_item` (
  `menu_item_id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `restaurant_id` INT NOT NULL,
  PRIMARY KEY (`menu_item_id`),
  INDEX `restaurant_id_idx` (`restaurant_id` ASC) VISIBLE,
  CONSTRAINT `restaurant_id`
    FOREIGN KEY (`restaurant_id`)
    REFERENCES `Nutrition_Tracker`.`Restaurant` (`restaurant_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);
    
INSERT INTO Menu_item values
(1, "Crispy Chicken Teriyaki Fried Rice", 1),
(2, "Crispy Pork Belly Fried Rice", 1),
(3, "Pad Thai", 1),
(4, "Vegetable Roll", 1),
(5, "Pad See You", 1),
(6, "Tom Yum Noodle Soup", 1),
(7, "Chicken Gra Pow with Rice", 1),
(8, "Chicken Satay", 1),
(9, "Americana Cheeseburger", 2),
(10, "Old Fashioned Burger", 2),
(11, "Fettuccini Alfredo", 2),
(12, "Farfalle with Chicken and Roasted Garlic", 2),
(13, "Vegan Cobb Salad", 2),
(14, "Avocado Egg Rolls", 2),
(15, "Grilled Rib-Eye Steak", 2),
(16, "Strawberry Cheesecake", 2),
(17, "8th Ave", 3),
(18, "Pura Vida", 3),
(19, "Tropical", 3),
(20, "DragonBerry", 3),
(21, "Nutaya", 3),
(22, "Electric Mermaid", 3),
(23, "Coco Craze", 3),
(24, "Power Bowl", 3),
(25, "Pink Power", 3),
(26, "Unknown Item", 4);



-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Menu_Item_Ingredients`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Menu_Item_Ingredients` (
  `ingredient_id` INT NOT NULL,
  `menu_item_id` INT NOT NULL,
  `num_of_servings` FLOAT NOT NULL,
  PRIMARY KEY (`ingredient_id`, `menu_item_id`),
  INDEX `menu_item_id_idx` (`menu_item_id` ASC) VISIBLE,
  CONSTRAINT `mii_menu_item_id`
    FOREIGN KEY (`menu_item_id`)
    REFERENCES `Nutrition_Tracker`.`Menu_item` (`menu_item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `mii_ingredient_id`
    FOREIGN KEY (`ingredient_id`)
    REFERENCES `Nutrition_Tracker`.`Ingredient` (`ingredient_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO Menu_Item_Ingredients values
(1, 1, 2), (2, 1, 0.5),(3, 1, 0.1),(4, 1, 6),(5, 1, 1.5),(15, 1, 0.2),(1, 2, 2),(2, 2, 0.5),
(3, 2, 0.1),(4, 2, 6),(12, 2, 0.2),(15, 2, 0.2),(6, 2, 2),(7, 3, 4),(8, 3, 2),(9, 3, 6),
(15, 3, 0.2),(12, 3, 0.2),(1, 3, 4),(11, 4, 5),(12, 4, 0.2),(2, 4, 0.5),(1, 5, 2),(13, 5, 4),
(11, 5, 4),(9, 5, 5),(15, 5, 0.3),(9, 6, 5),(2, 6, 0.5),(7, 6, 4),(16, 6, 4),(17, 7, 2.4),
(18, 7, 4),(19, 7, 0.7),(20, 7, 0.5),(4, 7, 6),(16, 8, 4),(21, 8, 1.4),(22, 9, 1),(23, 9, 0.6),
(24, 9, 3),(25, 9, 1.7),(26, 9, 1.1),(27, 9, 1.1),(28, 9, 1.5),(29, 9, 2), (29, 10, 2),(25, 10, 2),
(26, 10, 1),(27, 10, 4),(28, 10, 1),(30, 10, 0.6),(31, 11, 1.5),(32, 11, 2),(33, 11, 1.5),(34, 11, 1.3),
(35, 11, 0.6),(31, 12, 1.5),(16, 12, 4),(36, 12, 1.8),(26, 12, 1),(37, 12, 2),(38, 12, 3),(27, 12, 4),
(33, 12, 1.8),(32, 12, 2),(12, 12, 0.2),(25, 13, 2),(39, 13, 1.8),(40, 12, 2.4),(41, 13, 1.5),
(42, 13, 1),(43, 13, 5),(26, 13, 1.5),(11, 13, 3),(44, 13, 1),(45, 13, 1.8),(46, 13, 0.7),(40, 14, 2),
(26, 14, 1.5),(47, 14, 1),(3, 14, 0.5),(12, 14, 0.2),(48, 15, 4),(67, 15, 0.8),(32, 15, 1.5),(34, 15, 2),
(12, 15, 0.2),(49, 16, 2),(68, 16, 1.2),(1, 16, 2.5),(55, 16, 1.8),(50, 17, 7),(51, 17, 1.5),(52, 17, 2),
(53, 17, 0.2),(50, 18, 7),(51, 18, 1),(54, 18, 2),(55, 18, 2),(50, 19, 7),(52, 19, 2),(56, 19, 2),
(57, 19, 0.5),(53, 19, 0.2),(58, 20, 7.5),(51, 20, 1.5),(55, 20, 2),(54, 20, 2),(53, 20, 0.2),
(58, 21, 7.5),(51, 21, 1.5),(54, 21, 2),
(52, 21, 2),(57, 21, 0.5),(59, 21, 0.5),(60, 21, 1),(58, 22, 7.5),(61, 22, 1.5),(56, 22, 2),(62, 22, 2),
(57, 22, 0.5),(53, 22, 0.2),(66, 23, 7),(51, 23, 1),(52, 23, 3),(56, 23, 2),(62, 23, 2),(57, 23, 0.5),
(53, 23, 0.2),(50, 24, 7),(51, 24, 1.5),(52, 24, 2),(65, 24, 1),(64, 25, 0.7),(51, 25, 1),
(52, 25, 2),(53, 25, 0.2),(69, 26, 1);

select * from Menu_Item_Ingredients;



-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Activity_Level`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Activity_Level` (
  `activity_level_id` INT NOT NULL AUTO_INCREMENT,
  `activity_level` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`activity_level_id`));
  
INSERT INTO Activity_Level values
(1, "Regular Exercise"),
(2, "Minimal Exercise"),
(3, "Intense Exercise"),
(4, "No Exercise");







-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`User` (
  `user_id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `height` float NOT NULL,
  `weight` float NOT NULL,
  `sex` INT NOT NULL DEFAULT 0,
  `age` INT NOT NULL,
  `goal_weight` INT NOT NULL,
  `activity_level_fk` INT NOT NULL,
  PRIMARY KEY (`user_id`),
  INDEX `fk_User_Activity_Level1_idx` (`activity_level_fk` ASC) VISIBLE,
  CONSTRAINT `fk_User_Activity_Level1`
    FOREIGN KEY (`activity_level_fk`)
    REFERENCES `Nutrition_Tracker`.`Activity_Level` (`activity_level_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO User values
(1, "Chris", 183, 75, 0, 22, 78, 1),
(2, "Oscar", 176, 66, 0, 20, 70, 3),
(3, "Elsa", 163, 57, 1, 26, 54, 2),
(4, "Siri", 158, 46, 1, 19, 44, 4);



-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`User_Meal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`User_Meal` (
  `user_id` INT NOT NULL,
  `menu_item_id` INT NOT NULL,
  `date` DATE NOT NULL,
  `num_servings` INT NOT NULL,
  PRIMARY KEY (`user_id`, `menu_item_id`),
  INDEX `menu_item_id_idx` (`menu_item_id` ASC) VISIBLE,
  CONSTRAINT `nt_user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `Nutrition_Tracker`.`User` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `nt_menu_item_id`
    FOREIGN KEY (`menu_item_id`)
    REFERENCES `Nutrition_Tracker`.`Menu_item` (`menu_item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO User_Meal values
(1, 1, "2022-04-14", 1),
(2, 14, "2022-04-19", 1),
(3, 24, "2022-04-16", 1),
(4, 17, "2022-04-20", 2);

-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Allergy`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Allergy` (
  `allergy_id` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`allergy_id`));
  
INSERT INTO Allergy values
(1, "Peanuts"),
(2, "Dairy"),
(3, "Shellfish"),
(4, "Eggs"),
(5, "Treenuts"),
(6, "Fish"),
(7, "Soybeans"),
(8, "Wheat"),
(9, "Oats");


-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`User_Allergy`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`User_Allergy` (
  `user_id` INT NOT NULL,
  `allergy_id` INT NOT NULL,
  PRIMARY KEY (`user_id`, `allergy_id`),
  INDEX `allergy_id_idx` (`allergy_id` ASC) VISIBLE,
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `Nutrition_Tracker`.`User` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `allergy_id`
    FOREIGN KEY (`allergy_id`)
    REFERENCES `Nutrition_Tracker`.`Allergy` (`allergy_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO User_Allergy values
(3, 2),
(1, 7);



-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`Menu_Item_Allergy`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`Menu_Item_Allergy` (
  `menu_item_id` INT NOT NULL,
  `allergy_id` INT NOT NULL,
  PRIMARY KEY (`menu_item_id`, `allergy_id`),
  INDEX `allergy_id_idx` (`allergy_id` ASC) VISIBLE,
  CONSTRAINT `a_allergy_id`
    FOREIGN KEY (`allergy_id`)
    REFERENCES `Nutrition_Tracker`.`Allergy` (`allergy_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `a_menu_item_id`
    FOREIGN KEY (`menu_item_id`)
    REFERENCES `Nutrition_Tracker`.`Menu_item` (`menu_item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO Menu_Item_Allergy values
(1, 4),(1, 7),(2, 4),(2, 7),(3, 4),(3, 1),
(3, 7),(5, 4),(5, 8),(6, 3),(8, 1),(9, 2),
(10, 8),(10, 2),(11, 8),(11, 2),(12, 8),(12, 2),
(13, 5),(15, 2),(16, 2),(16, 4),(17, 9),(18, 9),
(19, 9),(20, 9),(21, 9),(22, 9),(23, 9),(24, 1),
(24, 9),(25, 9);





-- -----------------------------------------------------
-- Table `Nutrition_Tracker`.`User_Fav_Menu_Item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Nutrition_Tracker`.`User_Fav_Menu_Item` (
  `menu_item_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  PRIMARY KEY (`menu_item_id`, `user_id` ),
  INDEX `user_id_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `ufmi_menu_item_id`
    FOREIGN KEY (`menu_item_id`)
    REFERENCES `Nutrition_Tracker`.`Menu_item` (`menu_item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ufmi_user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `Nutrition_Tracker`.`User` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

INSERT INTO User_Fav_Menu_Item values
(14, 1),
(2, 2),
(21, 3),
(7, 4);



